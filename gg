-- üåä Blox Fruits Auto Farm (Learning Edition)
-- üìö M√¥ ph·ªèng thu·∫≠t to√°n auto farm + fast attack
-- ‚ùó Kh√¥ng s·ª≠ d·ª•ng hook, getgc, bypass cooldown
-- ‚ùó D√†nh cho m·ª•c ƒë√≠ch h·ªçc t·∫≠p

-- ================================
-- üß© L·∫§Y D·ªäCH V·ª§ C∆† B·∫¢N
-- ================================
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local Player = Players.LocalPlayer

-- Ch·ªù character load
local Character = Player.Character or Player.CharacterAdded:Wait()
local Root = Character:WaitForChild("HumanoidRootPart")
local Humanoid = Character:WaitForChild("Humanoid")

-- ================================
-- ‚öôÔ∏è T√ôY CH·ªåN
-- ================================
_G.AutoFarm = true
_G.FastAttack = true
_G.AttackRate = 0.05 -- m√¥ ph·ªèng t·ªëc ƒë·ªô ƒë√°nh nhanh

-- ================================
-- üåç X√ÅC ƒê·ªäNH SEA
-- ================================
local function GetSea()
    if game.PlaceId == 2753915549 then return 1
    elseif game.PlaceId == 4442272183 then return 2
    elseif game.PlaceId == 7449423635 then return 3
    end
    return 0
end

-- ================================
-- üéØ T·ªåA ƒê·ªò FARM THEO LEVEL
-- (ch·ªâ h·ªçc thu·∫≠t ‚Äì kh√¥ng ƒë·∫ßy ƒë·ªß to√†n game)
-- ================================
local FarmSpots = {
    [1] = {
        {Lv=1, Pos=CFrame.new(-1058,15,1546), Mob="Bandit"},
        {Lv=50, Pos=CFrame.new(928,6,4422), Mob="Desert Bandit"},
        {Lv=100, Pos=CFrame.new(1166,4,-1142), Mob="Snow Bandit"},
    },
    [2] = {
        {Lv=700, Pos=CFrame.new(-64,70,4473), Mob="Raider"},
        {Lv=900, Pos=CFrame.new(-5450,7,-745), Mob="Vampire"},
    },
    [3] = {
        {Lv=1500, Pos=CFrame.new(-380,73,5727), Mob="Pirate"},
        {Lv=1750, Pos=CFrame.new(2288,25,-6554), Mob="Giant"},
    }
}

local function GetSpot(lv, sea)
    local list = FarmSpots[sea]
    if not list then return nil end
    for i=#list,1,-1 do
        if lv >= list[i].Lv then
            return list[i]
        end
    end
    return list[1]
end

-- ================================
-- üèÉ TELEPORT M√î PH·ªéNG
-- ================================
local function SafeTP(cf)
    if Character and Root then
        Root.CFrame = cf + Vector3.new(0,5,0)
    end
end

-- ================================
-- ü•ä M√î PH·ªéNG FAST ATTACK
-- (kh√¥ng hook combat th·∫≠t)
-- ================================
local function FastAttack()
    if not _G.FastAttack then return end
    if not Character or Humanoid.Health <= 0 then return end

    -- g·ªçi ·∫£o ‚Äúƒë√°nh nhanh‚Äù
    print("‚ö° Fast Attack (simulated)")
    task.wait(_G.AttackRate)
end

-- ================================
-- üîç T√åM QU√ÅI G·∫¶N NH·∫§T (m√¥ ph·ªèng)
-- ================================
local function FindMob()
    if Workspace:FindFirstChild("Enemies") then
        for _,mob in pairs(Workspace.Enemies:GetChildren()) do
            if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                return mob
            end
        end
    end
    return nil
end

-- ================================
-- ü§ñ AUTO FARM V√íNG L·∫∂P
-- ================================
task.spawn(function()
    while _G.AutoFarm do
        local lv = Player.Data.Level.Value
        local sea = GetSea()
        local target = GetSpot(lv, sea)

        if target then
            print("üìç ƒê·∫øn v√πng farm:", target.Mob)
            SafeTP(target.Pos)
            task.wait(.3)
        end

        local mob = FindMob()
        if mob then
            print("üéØ ƒêang t·∫•n c√¥ng:", mob.Name)
            while mob and mob.Parent and mob.Humanoid.Health > 0 and _G.AutoFarm do
                FastAttack()
            end
        else
            print("üîç Kh√¥ng th·∫•y mob, di chuy·ªÉn nh·∫π...")
            SafeTP(CFrame.new(Root.Position + Vector3.new(10,0,10)))
            task.wait(.3)
        end
        task.wait(.1)
    end
end)
